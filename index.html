<!DOCTYPE html>
<html>

<head>
    <title>ãƒ«ãƒ¼ãƒˆæ¤œç´¢</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="index.css">

    <header id="header">
        <p class="brand-logo" alt="Coname">Itoshima Coast Highway</p>
        <nav class="wrapper">
            <ul class="menu">
                <li class="menu-area"><a onclick="location.href='search-pulldown.html';">Spot</a></li>
                <li class="menu-mypage"><a onclick="location.href='mypage.html';">My Page</a></li>
                <li class="menu-community"><a onclick="location.href='community.html';">Community</a></li>
            </ul>
            <ul class="login">
                <li class="menu-login"><a onclick="location.href='index.html';">Login</a></li>
                <li class="login-contact"><a onclick="location.href='contact.html';">Contact</a></li>
            </ul>
        </nav>
    </header>
</head>

<body>
    <main>
        <label>Start</label>
        <input type="text" id="start-Input" placeholder="ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚">
        <ul id="start">
            <li><a href="#">å§ªæµœé§…</a></li>
            <li><a href="#">ä¹å¤§å­¦ç ”éƒ½å¸‚é§…</a></li>
            <li><a href="#">ç­‘å‰å‰åŸé§…</a></li>
            <li><a href="#">ç­‘å‰æ·±æ±Ÿé§…</a></li>
        </ul>
        <br>
        <label>çµŒç”±åœ°ç‚¹â‘ </label>
        <input type="text" id="wayPointB-Input" placeholder="çµŒç”±åœ°ç‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚">
        <ul id="wayPointB">
            <li><a href="#">æ«»äº•äºŒè¦‹ãƒ¶æµ¦å¤«å©¦å²©</a></li>
            <li><a href="#">ç³¸å³¶ãƒˆãƒˆãƒ­ã®æ£®</a></li>
            <li><a href="#">ç˜å±±å±•æœ›å°</a></li>
            <li><a href="#">èŠ¥å±‹æµ·æ°´æµ´å ´</a></li>
            <li><a href="#">ç™½ç³¸ã®æ»</a></li>
            <li><a href="#">é›·å±± åƒå¦‚å¯º å¤§æ‚²ç‹é™¢</a></li>
        </ul>
        <br>
        <label>çµŒç”±åœ°ç‚¹â‘¡</label>
        <input type="text" id="wayPointC-Input" placeholder="çµŒç”±åœ°ç‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚">
        <ul id="wayPointC">
            <li><a href="#">æ«»äº•äºŒè¦‹ãƒ¶æµ¦å¤«å©¦å²©</a></li>
            <li><a href="#">ç³¸å³¶ãƒˆãƒˆãƒ­ã®æ£®</a></li>
            <li><a href="#">ç˜å±±å±•æœ›å°</a></li>
            <li><a href="#">èŠ¥å±‹æµ·æ°´æµ´å ´</a></li>
            <li><a href="#">ç™½ç³¸ã®æ»</a></li>
            <li><a href="#">é›·å±± åƒå¦‚å¯º å¤§æ‚²ç‹é™¢</a></li>
        </ul>
        <br>
        <label>Goal</label>
        <input type="text" id="goal-Input" placeholder="ã‚´ãƒ¼ãƒ«åœ°ç‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚">
        <ul id="goal">
            <li><a href="#">å§ªæµœé§…</a></li>
            <li><a href="#">ä¹å¤§å­¦ç ”éƒ½å¸‚é§…</a></li>
            <li><a href="#">ç­‘å‰å‰åŸé§…</a></li>
            <li><a href="#">ç­‘å‰æ·±æ±Ÿé§…</a></li>
        </ul>


        <div class="send">
            <button id="send" onclick="location.href='route_itoshima.html';">ãƒ«ãƒ¼ãƒˆã‚’è¡¨ç¤º</button>
        </div>


        <!-- <button type="button" id="output">button</button> -->

    </main>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css" />
    <script src="https://www.gstatic.com/firebasejs/8.5.0/firebase-auth.js"></script>

    <script>
        // ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ãƒªã‚¹ãƒˆã®ulè¦ç´ ã‚’å–å¾—
        const startUl = document.getElementById("start");
        const wayPointBUl = document.getElementById("wayPointB");
        const wayPointCUl = document.getElementById("wayPointC");
        const goalUl = document.getElementById("goal");

        // liè¦ç´ ã‚’å–å¾— startULã¯DOM(JSã‹ã‚‰HTMLã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«å¿…è¦)
        const startLi = startUl.getElementsByTagName("li");
        const wayPointBLi = wayPointBUl.getElementsByTagName("li");
        const wayPointCLi = wayPointCUl.getElementsByTagName("li");
        const goalLi = goalUl.getElementsByTagName("li");

        // liè¦ç´ ã®æ•°ã ã‘ãƒ«ãƒ¼ãƒ—
        for (let i = 0; i < startLi.length; i++) {
            // aè¦ç´ ã‚’å–å¾—
            const a = startLi[i].getElementsByTagName("a")[0];

            // aè¦ç´ ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            a.addEventListener("click", function () {
                // aè¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã®å€¤ã«è¨­å®š
                document.getElementById("start-Input").value = a.textContent;
            });
        };

        for (let i = 0; i < wayPointBLi.length; i++) {
            // aè¦ç´ ã‚’å–å¾—
            const a = wayPointBLi[i].getElementsByTagName("a")[0];

            // aè¦ç´ ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            a.addEventListener("click", function () {
                // aè¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã®å€¤ã«è¨­å®š
                document.getElementById("wayPointB-Input").value = a.textContent;
            });
        };

        for (let i = 0; i < wayPointCLi.length; i++) {
            // aè¦ç´ ã‚’å–å¾—
            const a = wayPointCLi[i].getElementsByTagName("a")[0];

            // aè¦ç´ ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            a.addEventListener("click", function () {
                // aè¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã®å€¤ã«è¨­å®š
                document.getElementById("wayPointC-Input").value = a.textContent;
            });
        };

        for (let i = 0; i < goalLi.length; i++) {
            // aè¦ç´ ã‚’å–å¾—
            const a = goalLi[i].getElementsByTagName("a")[0];

            // aè¦ç´ ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            a.addEventListener("click", function () {
                // aè¦ç´ ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—ã—ã¦ã€ãƒ†ã‚­ã‚¹ãƒˆãƒœãƒƒã‚¯ã‚¹ã®å€¤ã«è¨­å®š
                document.getElementById("goal-Input").value = a.textContent;
            });
        }

    </script>

    <script type="module">

        import {
            initializeApp
        } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";

        // ğŸ”½ è¿½åŠ 
        import {
            getFirestore,
            collection,
            addDoc,
            onSnapshot,
            //orderbyã§ãƒ‡ãƒ¼ã‚¿ã®ã‚½ãƒ¼ãƒˆã¨orderbyã§
            query,
            orderBy,
        } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "",
            authDomain: "jsapi-5152e.firebaseapp.com",
            projectId: "jsapi-5152e",
            storageBucket: "jsapi-5152e.appspot.com",
            messagingSenderId: "374799652264",
            appId: "1:374799652264:web:b8c78a5a60889d0c7e799d"
        };


        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // ğŸ”½ è¿½åŠ 
        const db = getFirestore(app);

        $("#send").on("click", async function () {
            // é€ä¿¡æ™‚ã«å¿…è¦ãªå‡¦ç†
            const postData = {
                start: $("#start-Input").val(),
                waypointB: $("#wayPointB-Input").val(),
                waypointC: $("#wayPointC-Input").val(),
                goal: $("#goal-Input").val(),

            };

            // console.log("#start");

            try {
                // ç¬¬ä¸€å¼•æ•°ã«ã¯è¿½åŠ ã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã€ç¬¬äºŒå¼•æ•°ã«ã¯è¿½åŠ ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒæ¸¡ã•ã‚Œã‚‹
                await addDoc(collection(db, "info"), postData);
                // ãƒ‡ãƒ¼ã‚¿ãŒFirestoreã«è¿½åŠ ã•ã‚ŒãŸå¾Œã«ãƒšãƒ¼ã‚¸ã‚’é·ç§»ã•ã›ã‚‹
                location.href = 'route_itoshima.html';
            } catch (e) {
                console.error("Error adding document: ", e);
            }
        })

        const q = query(collection(db, "chat"));

        onSnapshot(q, (querySnapshot) => {
            console.log(querySnapshot.docs);
            //è¤‡é›‘ãªå½¢ã®ãŸã‚å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿æŠ½å‡ºã—ãŸã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã®é…åˆ—ã€ã«å¤‰æ›
            const documents = [];
            querySnapshot.docs.forEach(function (doc) {
                const document = {
                    id: doc.id,
                    data: doc.data(),
                };
                documents.push(document);
            });

            const htmlElements = [];
            documents.forEach(function (document) {
                htmlElements.push(`
                        <li id="${document.id}">
                        <p>${document.data.goal}</p>
                        <p>${document.data.start}</p>
                        <p>${document.data.waypointB}</p>
                        <p>${document.data.waypointC}</p>
                        </li>
                     `);
            });

            $("#output").html(htmlElements);

        });




    </script>



</body>

<footer>
    <nav class="wrapper-footer">
        <ul class="menu-footer">
            <li class="footer-first"><a href="#">åˆã‚ã¦ã®æ–¹ã¸</a></li>
            <li class="footer-question"><a href="#">ã‚ˆãã‚ã‚‹è³ªå•</a></li>
            <li class="footer-rule"><a href="#">åˆ©ç”¨è¦ç´„</a></li>
            <li class="footer-treat"><a href="#">ç‰¹å®šå•†å“å–å¼•æ³•</a></li>
            <li class="footer-policy"><a href="#">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></li>
            <li class="footer-contact"><a href="#">ãŠå•ã„åˆã‚ã›</a></li>
            <li class="footer-CoInfo"><a href="#">ä¼šç¤¾æ¦‚è¦</a></li>
        </ul>
    </nav>
    <h5 class="copy-rights">Â©ï¸2023 Cloud Garage Co,.Ltd. All Rights Reserved</h5>
</footer>

</html>